(this.webpackJsonpcarta=this.webpackJsonpcarta||[]).push([[0],{31:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c=n(7),a=n.n(c),i=n(23),r=n.n(i),s=(n(31),n(10)),u=n(14);u.a.apps.length||u.a.initializeApp({apiKey:"AIzaSyA8S-srH-tHf8zNFjm-K8wExlaxY0xEn0Q",authDomain:"carta-engine.firebaseapp.com",projectId:"carta-engine",storageBucket:"carta-engine.appspot.com",messagingSenderId:"129718650492",appId:"1:129718650492:web:6a0311a65b93ebbef36bf9",measurementId:"G-T9VZHWB6KX"});var o=new u.a.auth.GoogleAuthProvider,l=u.a.auth(),j=u.a,b=n(24),f=n(20),h=n.n(f),O=n(25),d=n(26),v=n(17),x=n(3),p=function(e){Object(v.a)(e);var t=Object(c.useRef)(null),n=Object(c.useState)(null),a=Object(s.a)(n,2),i=a[0],r=a[1],u=Object(c.useState)(null),o=Object(s.a)(u,2),l=o[0],f=o[1],p=Object(c.useState)(null),g=Object(s.a)(p,2),m=g[0],y=g[1],S=Object(c.useState)(null),w=Object(s.a)(S,2),I=w[0],N=w[1],P=Object(c.useState)(null),k=Object(s.a)(P,2),C=k[0],M=k[1],T=Object(c.useState)(null),A=Object(s.a)(T,2),E=A[0],F=A[1],L=Object(c.useState)("#f00000"),B=Object(s.a)(L,2),R=B[0],D=(B[1],Object(c.useState)(null)),z=Object(s.a)(D,2),H=(z[0],z[1]),K=Object(c.useState)(null),Y=Object(s.a)(K,2),G=Y[0],J=Y[1],U=Object(c.useState)(!1),W=Object(s.a)(U,2),X=W[0],q=W[1],Q=Object(c.useState)([]),V=Object(s.a)(Q,2),Z=V[0],$=V[1];Object(c.useEffect)((function(){m&&Z&&ne()}),[E,Z]);var _=function(){var e=Object(O.a)(h.a.mark((function e(t){var n,c,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.x,c=t.y,a={x:n,y:c},i.push(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){m.clearRect(0,0,l.width,l.height),Z&&Z.forEach((function(e){return function(e,t){m.fillStyle=R,m.beginPath(),m.arc(e,t,20,0,2*Math.PI),m.fill()}(e.x,e.y)}))},te=function(e,t){var n=e.x-t.x,c=e.y-t.y;return Math.sqrt(n*n+c*c)},ne=function(){E&&(ee(),m.setLineDash([5,2]),m.strokeStyle="#ccc",m.beginPath(),m.moveTo(E.x,0),m.lineTo(E.x,l.height),m.stroke(),m.beginPath(),m.moveTo(0,E.y),m.lineTo(l.width,E.y),m.stroke(),X||function(){if(J(void 0),Z){var e,t=void 0,n=Object(b.a)(Z);try{for(n.s();!(e=n.n()).done;){var c=e.value;if(t){var a=te(E,t);te(E,c)<a&&(t=c)}else t=c}}catch(i){n.e(i)}finally{n.f()}t&&te(E,t)<20&&(J(t),m.fillStyle="#0ff",m.beginPath(),m.arc(t.x,t.y,20,0,2*Math.PI),m.fill())}}())};return Object(c.useEffect)((function(){var e=j.database().ref("test");e.get().then((function(e){var t=e.val(),n=[];for(var c in t)c&&n.push({id:c,x:t[c].x,y:t[c].y});$(n)})),e.on("value",(function(e){var t=e.val(),n=[];for(var c in t)c&&n.push({id:c,x:t[c].x,y:t[c].y});$(n)})),r(e);var n=t.current;f(n);var c=n.getContext("2d");y(c);var a=t.current.getBoundingClientRect();N(a),M({x:a.x,y:a.y})}),[]),Object(x.jsx)("canvas",{onMouseDown:function(e){H(e),q(!!G),ne()},onMouseUp:function(e){H(e),X||_(E),q(!1),ne()},onMouseMove:function(e){if(C){var t=(e.screenX-C.x)*(1920/I.width),n=(e.screenY-C.y)*(1024/I.height)-120;if(X&&G){var c=Z.find((function(e){return e.id=G.id}));c.x+=t-E.x,c.y+=n-E.y,$(Object(d.a)(Z))}F({x:t,y:n})}},ref:t,width:"1920",height:"1024"})},g=n(21),m=n(22),y=(n(41),function(e){return Object(v.a)(e),Object(x.jsxs)("div",{id:"toolbar",children:[Object(x.jsx)("div",{className:"item",children:Object(x.jsx)(g.a,{icon:m.b,className:"light-icon"})}),Object(x.jsx)("div",{className:"item",children:Object(x.jsx)(g.a,{icon:m.a,className:"light-icon"})})]})}),S=(n(42),function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=(t[0],t[1],Object(c.useState)([])),a=Object(s.a)(n,2),i=a[0],r=a[1],u=Object(c.useState)(null),b=Object(s.a)(u,2),f=b[0],h=b[1];Object(c.useEffect)((function(){l.onAuthStateChanged((function(e){e&&(h(e),j.database().ref("users").on("value",(function(e){var t=e.val(),n=[];for(var c in t){var a=t[c].items;for(var i in a)n.push({id:i,uid:c,title:a[i].title,user:a[i].user})}r(n)})))}))}),[]);return Object(x.jsxs)("div",{className:"app",children:[Object(x.jsx)("header",{children:Object(x.jsxs)("div",{className:"wrapper",children:[Object(x.jsx)("h1",{children:"CARTA"}),Object(x.jsx)("div",{className:"user-profile",children:f?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("img",{src:f.photoURL}),Object(x.jsx)("button",{onClick:function(){l.signOut().then((function(){h(null),r(i)}))},children:"Log Out"})]}):Object(x.jsx)("button",{onClick:function(){l.signInWithPopup(o).then((function(e){var t=e.user;h(t)}))},children:"Log In"})})]})}),f?Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)(p,{}),Object(x.jsx)(y,{})]})}):Object(x.jsx)("div",{className:"wrapper",children:Object(x.jsx)("p",{children:"You must be logged in to see your maps."})})]})}),w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))};r.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(S,{})}),document.getElementById("root")),w()}},[[43,1,2]]]);
//# sourceMappingURL=main.f3c73bcb.chunk.js.map